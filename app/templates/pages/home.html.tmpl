{{ define "title" }}Eating is Activism{{ end }}
{{ define "description"}}A map of food producers and purveyors that strive for regenerative practices.{{ end }}

{{ define "head" }}
    <meta property="og:url" content="https://eatingisactivism.com/">
    {{/*  <link rel="preload" href="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css"></noscript>
    <script id="mapboxJS"  defer src="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.js"></script>  */}}
    <link rel="preload" href="/public/vendor/mapbox-gl-v320.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/public/vendor/mapbox-gl-v320.css"></noscript>
    <script id="mapboxJS"  defer src="/public/vendor/mapbox-gl-v320.js"></script>
{{ end }}

{{ define "content" }}
  <div class="bg-[rgb(255,247,231)]">
    <section class="container max-w-xl mx-auto px-4 py-24">
      <h1 class="text-center font-bold text-5xl md:text-7xl lg:text-9xl mb-10">Eat Good Food</h1>
      <p class="max-w-prose mx-auto mb-5">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere iure nesciunt, ipsa, corporis nihil adipisci totam doloremque est, veniam natus beatae magni velit nostrum fuga dolor dolore ipsam quibusdam id.</p>
      <p class="max-w-prose mx-auto">Et ut voluptate minim laborum duis adipisicing nisi et consequat adipisicing magna elit. Fugiat minim esse nisi pariatur ut. Ex ad esse exercitation sit do veniam eu. Lorem cillum eu eu nostrud nulla excepteur eu esse eu aute Lorem ipsum.</p>
    </section>
  </div>
  <section class="map-embed mb-20 flex flex-row relative">
    <div id="mapFilters" class="h-full w-96 p-4 bg-white grow-0">
      <p>Here are some filters</p>
    </div>
    <div id="map" class="h-full w-auto grow"></div>
  </section>

  <section class="container max-w-prose mx-auto mb-20 px-4">
    <h2 class="text-3xl text-center font-bold mb-10">What is Regenerative Organic Certified?</h2>
    <p class="mb-5">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere iure nesciunt, ipsa, corporis nihil adipisci totam doloremque est, veniam natus beatae magni velit nostrum fuga dolor dolore ipsam quibusdam id.</p>
    <p>Et ut voluptate minim laborum duis adipisicing nisi et consequat adipisicing magna elit. Fugiat minim esse nisi pariatur ut. Ex ad esse exercitation sit do veniam eu. Lorem cillum eu eu nostrud nulla excepteur eu esse eu aute Lorem ipsum.</p>
  </section>

  <section class="container max-w-prose mx-auto mb-20 px-4">
    <h2 class="text-3xl text-center font-bold mb-10">What is USDA Organic?</h2>
    <p class="mb-5">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere iure nesciunt, ipsa, corporis nihil adipisci totam doloremque est, veniam natus beatae magni velit nostrum fuga dolor dolore ipsam quibusdam id.</p>
    <p>Et ut voluptate minim laborum duis adipisicing nisi et consequat adipisicing magna elit. Fugiat minim esse nisi pariatur ut. Ex ad esse exercitation sit do veniam eu. Lorem cillum eu eu nostrud nulla excepteur eu esse eu aute Lorem ipsum.</p>
  </section>

  <section class="container max-w-prose mx-auto mb-20 px-4">
    <h2 class="text-3xl text-center font-bold mb-10">What is Humane?</h2>
    <p class="mb-5">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere iure nesciunt, ipsa, corporis nihil adipisci totam doloremque est, veniam natus beatae magni velit nostrum fuga dolor dolore ipsam quibusdam id.</p>
    <p>Et ut voluptate minim laborum duis adipisicing nisi et consequat adipisicing magna elit. Fugiat minim esse nisi pariatur ut. Ex ad esse exercitation sit do veniam eu. Lorem cillum eu eu nostrud nulla excepteur eu esse eu aute Lorem ipsum.</p>
  </section>

  <section class="container max-w-prose mx-auto mb-20 px-4">
    <h2 class="text-3xl text-center font-bold mb-10">What about Conventional?</h2>
    <p class="mb-5">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Facere iure nesciunt, ipsa, corporis nihil adipisci totam doloremque est, veniam natus beatae magni velit nostrum fuga dolor dolore ipsam quibusdam id.</p>
    <p>Et ut voluptate minim laborum duis adipisicing nisi et consequat adipisicing magna elit. Fugiat minim esse nisi pariatur ut. Ex ad esse exercitation sit do veniam eu. Lorem cillum eu eu nostrud nulla excepteur eu esse eu aute Lorem ipsum.</p>
  </section>

  <script>
    const locations = JSON.parse({{ .locationsJSON }});

    const mapboxScripts = document.getElementById('mapboxJS');
    mapboxScripts.onload = () => {
      mapboxgl.accessToken = {{ .mapboxToken }};
      const map = new mapboxgl.Map({
        attributionControl: false,
        compact: true,
        container: 'map',
        style: 'mapbox://styles/mapbox/outdoors-v12',
        center: [-98.5556199, 39.8097343],
        zoom: 2,
        cooperativeGestures: true
      });

      {{/*  map.addControl(new mapboxgl.GeolocateControl({
        positionOptions: {
          enableHighAccuracy: true
        },
        trackUserLocation: true,
        showUserHeading: true
      }));  */}}

      locations.forEach(location => {
        new mapboxgl.Marker()
          .setLngLat([location.Lat, location.Lng])
          .setPopup(new mapboxgl.Popup().setHTML(`
            <div class="location-popup flex flex-col ${location.Standard}">
              ${location.Image ? `<div class="location-popup-image" style="background-image: url(\'/public/images/${location.Slug}-popup.jpg\')"></div>` : ''}

              <div class="location-popup-content">
                <ul class="tags">
                  ${location.Tags.map(tag => `<li class="tag">${tag}</li>`).join('')}
                </ul>
                <ul class="badges">
                  ${location.Badges.map(badge => `<li class="badge">${badge}</li>`).join('')}
                </ul>
                <h3>${location.Name}</h3>
                <p>${location.Description}</p>
                <a class="outline-none button button-outline" href="/locations/${location.Slug}" target="_blank">Explore</a>
              </div>
            </div>
          `))
          .addTo(map);
      });
    };

  </script>
{{ end }}